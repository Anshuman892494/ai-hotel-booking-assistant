<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Hotel Booking Assistant - Find Best Hotel Deals Worldwide</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            /* Blue */
            --secondary: #1e40af;
            /* Darker Blue */
            --accent: #3b82f6;
            /* Lighter Blue */
            --bg: #f8fafc;
            --gradient-start: rgba(37, 99, 235, 0.1);
            --gradient-end: rgba(30, 64, 175, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            background: var(--bg);
            color: #1e293b;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end)),
                url('https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&w=1350&q=80') no-repeat center center/cover;
            opacity: 0.15;
            z-index: -1;
        }

        .container {
            width: 100%;
            max-width: 800px;
            padding: 2rem;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            animation: slideDown 0.5s ease;
            background: rgba(255, 255, 255, 0.9);
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .header .credit {
            font-size: 0.9rem;
            color: #64748b;
            margin-bottom: 0.5rem;
        }

        .chat-container {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .chat-messages {
            height: 60vh;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .message {
            max-width: 80%;
            padding: 1.2rem;
            border-radius: 15px;
            animation: popIn 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
            align-self: flex-start;
            border-left: 4px solid var(--accent);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .user-message {
            align-self: flex-end;
            background: var(--primary);
            color: white;
            border-right: 4px solid var(--secondary);
            border-left: none;
        }

        .options-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }

        .option-btn {
            padding: 0.8rem 1.5rem;
            background: var(--primary);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            background: var(--secondary);
        }

        .input-container {
            margin-top: 2rem;
            display: flex;
            gap: 1rem;
        }

        input {
            flex: 1;
            padding: 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 15px;
            background: white;
            color: #1e293b;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }

        input::placeholder {
            color: #94a3b8;
        }

        .typing-indicator {
            display: none;
            padding: 1rem;
            color: var(--accent);
            font-style: italic;
            align-items: center;
            gap: 0.5rem;
        }

        .saved-hotels {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: bold;
            color: var(--primary);
            border: 1px solid var(--accent);
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .saved-hotels:hover {
            background: var(--primary);
            color: white;
        }

        .amenity {
            display: inline-block;
            background: rgba(59, 130, 246, 0.1);
            padding: 0.3rem 0.6rem;
            border-radius: 15px;
            margin: 0.2rem;
            font-size: 0.8rem;
            color: var(--primary);
        }

        .hotel-card {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-left: 4px solid var(--accent);
        }

        .hotel-card h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .hotel-card .price {
            font-weight: bold;
            color: #10b981;
            margin: 0.5rem 0;
        }

        .hotel-card .rating {
            color: #f59e0b;
            font-weight: bold;
        }

        .date-picker {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
        }

        .date-picker input {
            padding: 0.8rem;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }

        @keyframes popIn {
            from {
                transform: scale(0.9);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes slideDown {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .chat-messages {
                height: 50vh;
            }

            .message {
                max-width: 90%;
            }

            .saved-hotels {
                position: static;
                margin: 0.5rem auto;
                width: fit-content;
            }
        }
    </style>
</head>

<body>
    <div class="saved-hotels" onclick="handleOptionClick('view_saved')">
        <i class="fas fa-heart"></i> Saved Hotels
    </div>

    <div class="container">
        <div class="header">
            <h1>AI Hotel Booking Assistant <i class="fas fa-hotel"></i></h1>
            <!-- <div class="credit">Project by Anshuman Varma <br> Registration No.: 12414950</div> -->
            <p>Find the best hotel deals worldwide, compare prices, and book your perfect stay!</p>
        </div>

        <div class="chat-container">
            <div class="chat-messages" id="chat-messages"></div>
            <div class="typing-indicator" id="typing">
                <i class="fas fa-circle-notch fa-spin"></i> Searching for hotel deals...
            </div>
            <div class="input-container">
                <input type="text" id="user-input" placeholder="Ask about hotels (e.g., 'Hotels in Paris for June')...">
                <button class="option-btn" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i> Send
                </button>
            </div>
        </div>
    </div>


    <!-- The hotels cover major Indian destinations like:

    Maharashtra (Mumbai, Pune)
    
    Rajasthan (Jaipur, Udaipur, Jodhpur)
    
    Kerala (Kochi, Kovalam)
    
    Tamil Nadu (Chennai, Mahabalipuram)
    
    Karnataka (Bengaluru, Coorg)
    
    Goa
    
    Himachal Pradesh (Shimla)
    
    West Bengal (Darjeeling)
    
    Uttar Pradesh (Agra, Varanasi)
    
    And many more! -->



    <script>
        const chatMessages = document.getElementById('chat-messages');
        const typingIndicator = document.getElementById('typing');
        const userInput = document.getElementById('user-input');

        // Amadeus API credentials (Note: In production, these should be handled server-side)
        const API_KEY = 'https://test.api.amadeus.com/v1/security/oauth2/token'; // Replace with your actual API key
        const API_SECRET = 'https://test.api.amadeus.com/v1/security/oauth2/tokenT'; // Replace with your actual API secret
        let accessToken = '';

        // Sample hotel data for when API is not available
        const sampleHotelData = {
            popular_destinations: [
                // Luxury hotels
                { name: "Taj Mahal Palace", location: "Mumbai, Maharashtra", price: 25000, currency: "INR", rating: 4.9, amenities: ["Luxury", "Sea View", "Heritage", "Spa", "Fine Dining"], image: "https://images.unsplash.com/photo-1583417319070-4a69db38a482" },
                { name: "The Oberoi Amarvilas", location: "Agra, Uttar Pradesh", price: 45000, currency: "INR", rating: 4.9, amenities: ["Taj Mahal View", "Luxury", "Private Pool", "Butler Service"], image: "https://images.unsplash.com/photo-1566438480900-0609be27a4be" },
                { name: "Taj Falaknuma Palace", location: "Hyderabad, Telangana", price: 38000, currency: "INR", rating: 4.8, amenities: ["Palace Hotel", "Luxury", "Historic", "Horse Carriage Rides"], image: "https://images.unsplash.com/photo-1582719471386-5d6891411a1a" },
                { name: "The Leela Palace", location: "Bengaluru, Karnataka", price: 22000, currency: "INR", rating: 4.7, amenities: ["Luxury", "Spa", "Infinity Pool", "Gardens"], image: "https://images.unsplash.com/photo-1566073771259-6a8506099945" },
                { name: "Rambagh Palace", location: "Jaipur, Rajasthan", price: 32000, currency: "INR", rating: 4.8, amenities: ["Former Royal Residence", "Luxury", "Spa", "Fine Dining"], image: "https://images.unsplash.com/photo-1584132967334-10e028bd69f7" },

                // Business hotels
                { name: "ITC Grand Chola", location: "Chennai, Tamil Nadu", price: 15000, currency: "INR", rating: 4.7, amenities: ["Business Center", "Spa", "Multiple Restaurants", "Pool"], image: "https://images.unsplash.com/photo-1566073771259-6a8506099945" },
                { name: "The Lalit New Delhi", location: "New Delhi", price: 12000, currency: "INR", rating: 4.5, amenities: ["Central Location", "Conference Rooms", "Spa", "Roof Top Pool"], image: "https://images.unsplash.com/photo-1566438480900-0609be27a4be" },
                { name: "Hyatt Regency", location: "Pune, Maharashtra", price: 10000, currency: "INR", rating: 4.4, amenities: ["Business Facilities", "Fitness Center", "Multiple Dining Options"], image: "https://images.unsplash.com/photo-1582719471386-5d6891411a1a" },

                // Heritage properties
                { name: "Taj Lake Palace", location: "Udaipur, Rajasthan", price: 35000, currency: "INR", rating: 4.9, amenities: ["Lake View", "Luxury", "Boat Transfer", "Royal Experience"], image: "https://images.unsplash.com/photo-1566073771259-6a8506099945" },
                { name: "The Gateway Hotel", location: "Mahabalipuram, Tamil Nadu", price: 8000, currency: "INR", rating: 4.3, amenities: ["Beach Access", "Heritage", "Pool", "Spa"], image: "https://images.unsplash.com/photo-1584132967334-10e028bd69f7" },
                { name: "Wildflower Hall", location: "Shimla, Himachal Pradesh", price: 28000, currency: "INR", rating: 4.7, amenities: ["Mountain View", "Luxury", "Spa", "Adventure Activities"], image: "https://images.unsplash.com/photo-1583417319070-4a69db38a482" }
            ],
            budget_options: [
                // Budget chains
                { name: "Treebo Trend", location: "Mumbai, Maharashtra", price: 2500, currency: "INR", rating: 3.9, amenities: ["Budget", "Clean Rooms", "Free WiFi", "Breakfast"], image: "https://images.unsplash.com/photo-1520250497591-112f2f40a3f4" },
                { name: "OYO Townhouse", location: "Bengaluru, Karnataka", price: 1800, currency: "INR", rating: 3.7, amenities: ["Budget", "Smart Rooms", "Caf√©", "Free WiFi"], image: "https://images.unsplash.com/photo-1566073771259-6a8506099945" },
                { name: "FabHotel", location: "Delhi", price: 2200, currency: "INR", rating: 3.8, amenities: ["Budget", "Complimentary Breakfast", "Free WiFi"], image: "https://images.unsplash.com/photo-1582719471386-5d6891411a1a" },

                // State-specific budget options
                { name: "Hotel Supreme", location: "Jaipur, Rajasthan", price: 1500, currency: "INR", rating: 3.5, amenities: ["Budget", "City Center", "Basic Amenities"], image: "https://images.unsplash.com/photo-1584132967334-10e028bd69f7" },
                { name: "Hotel Sapphire", location: "Goa", price: 2000, currency: "INR", rating: 3.6, amenities: ["Budget", "Near Beach", "AC Rooms"], image: "https://images.unsplash.com/photo-1566438480900-0609be27a4be" },
                { name: "Hotel Hill View", location: "Darjeeling, West Bengal", price: 1800, currency: "INR", rating: 3.4, amenities: ["Budget", "Mountain View", "Basic Amenities"], image: "https://images.unsplash.com/photo-1583417319070-4a69db38a482" },
                { name: "Hotel Ganges View", location: "Varanasi, Uttar Pradesh", price: 1200, currency: "INR", rating: 3.2, amenities: ["Budget", "Ghat View", "Basic Amenities"], image: "https://images.unsplash.com/photo-1566073771259-6a8506099945" },
                { name: "Hotel Kerala House", location: "Kochi, Kerala", price: 1500, currency: "INR", rating: 3.5, amenities: ["Budget", "Traditional Decor", "Homely Food"], image: "https://images.unsplash.com/photo-1582719471386-5d6891411a1a" },

                // Mid-range options
                { name: "Lemon Tree Premier", location: "Chennai, Tamil Nadu", price: 4500, currency: "INR", rating: 4.1, amenities: ["Comfortable", "Pool", "Restaurant", "Fitness Center"], image: "https://images.unsplash.com/photo-1584132967334-10e028bd69f7" },
                { name: "Radisson Blu", location: "Guwahati, Assam", price: 5000, currency: "INR", rating: 4.2, amenities: ["Comfortable", "River View", "Restaurant", "Bar"], image: "https://images.unsplash.com/photo-1566438480900-0609be27a4be" },
                { name: "Fortune Park", location: "Bhopal, Madhya Pradesh", price: 4000, currency: "INR", rating: 4.0, amenities: ["Business Hotel", "Conference Facilities", "Restaurant"], image: "https://images.unsplash.com/photo-1583417319070-4a69db38a482" }
            ],
            // Adding more categories
            beach_resorts: [
                { name: "Taj Exotica Resort & Spa", location: "Goa", price: 18000, currency: "INR", rating: 4.7, amenities: ["Beachfront", "Luxury", "Spa", "Water Sports"], image: "https://images.unsplash.com/photo-1566073771259-6a8506099945" },
                { name: "The Leela Kovalam", location: "Kovalam, Kerala", price: 15000, currency: "INR", rating: 4.6, amenities: ["Cliff-top Location", "Ayurveda Spa", "Private Beach"], image: "https://images.unsplash.com/photo-1582719471386-5d6891411a1a" },
                { name: "Taj Fisherman's Cove", location: "Chennai, Tamil Nadu", price: 12000, currency: "INR", rating: 4.5, amenities: ["Beach Resort", "Spa", "Water Sports"], image: "https://images.unsplash.com/photo-1584132967334-10e028bd69f7" }
            ],
            hill_stations: [
                { name: "Wildflower Hall", location: "Shimla, Himachal Pradesh", price: 28000, currency: "INR", rating: 4.7, amenities: ["Mountain View", "Luxury", "Spa", "Adventure Activities"], image: "https://images.unsplash.com/photo-1583417319070-4a69db38a482" },
                { name: "Windamere Hotel", location: "Darjeeling, West Bengal", price: 8000, currency: "INR", rating: 4.3, amenities: ["Heritage", "Mountain View", "Old World Charm"], image: "https://images.unsplash.com/photo-1566073771259-6a8506099945" },
                { name: "The Tamara Coorg", location: "Coorg, Karnataka", price: 22000, currency: "INR", rating: 4.6, amenities: ["Luxury", "Coffee Plantation", "Spa", "Nature Walks"], image: "https://images.unsplash.com/photo-1582719471386-5d6891411a1a" }
            ],
            heritage_properties: [
                { name: "Taj Umaid Bhawan Palace", location: "Jodhpur, Rajasthan", price: 40000, currency: "INR", rating: 4.9, amenities: ["Royal Palace", "Luxury", "Museum", "Spa"], image: "https://images.unsplash.com/photo-1584132967334-10e028bd69f7" },
                { name: "The Paul Bangalore", location: "Bengaluru, Karnataka", price: 10000, currency: "INR", rating: 4.4, amenities: ["Art Hotel", "Luxury", "Spa", "Fine Dining"], image: "https://images.unsplash.com/photo-1566438480900-0609be27a4be" },
                { name: "Ahilya Fort", location: "Maheshwar, Madhya Pradesh", price: 15000, currency: "INR", rating: 4.5, amenities: ["Fort Hotel", "Narmada River View", "Cultural Experience"], image: "https://images.unsplash.com/photo-1583417319070-4a69db38a482" }
            ]
        };

        let currentCategory = null;
        let currentOffset = 0;
        let savedHotels = [];
        let userPreferences = {
            budget: null,
            travelDates: null,
            preferredDestinations: []
        };

        // Initialize the app
        async function init() {
            // Try to get Amadeus API token
            try {
                const response = await fetch('https://test.api.amadeus.com/v1/security/oauth2/token', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: `grant_type=client_credentials&client_id=${'https://test.api.amadeus.com/v1/security/oauth2/token'}&client_secret=${'https://test.api.amadeus.com/v1/security/oauth2/token'}`
                });

                const data = await response.json();
                accessToken = data.access_token;
                console.log("Amadeus API connected successfully");
            } catch (error) {
                console.error("Error connecting to Amadeus API. Using sample data.", error);
            }

            displayMainMenu();
        }

        function createMessage(content, isUser = false, options = []) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            if (isUser) messageDiv.classList.add('user-message');
            messageDiv.innerHTML = content;

            if (options.length > 0) {
                const optionsContainer = document.createElement('div');
                optionsContainer.classList.add('options-container');
                options.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.classList.add('option-btn');
                    btn.innerHTML = `${opt.icon ? opt.icon : ''} ${opt.text}`;
                    btn.onclick = () => handleOptionClick(opt.action, opt.data);
                    optionsContainer.appendChild(btn);
                });
                messageDiv.appendChild(optionsContainer);
            }

            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTyping() {
            typingIndicator.style.display = 'flex';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTyping() {
            typingIndicator.style.display = 'none';
        }

        function displayMainMenu() {
            currentCategory = null;
            currentOffset = 0;
            createMessage(`üè® Welcome to your AI Hotel Booking Assistant! How can I help you find your perfect stay?`, false, [
                { text: 'Search Hotels', icon: '<i class="fas fa-search"></i>', action: 'search_hotels' },
                { text: 'Popular Destinations', icon: '<i class="fas fa-map-marker-alt"></i>', action: 'popular_destinations' },
                { text: 'Budget Options', icon: '<i class="fas fa-wallet"></i>', action: 'budget_options' },
                { text: 'Luxury Hotels', icon: '<i class="fas fa-crown"></i>', action: 'luxury_hotels' },
                { text: 'View Saved Hotels', icon: '<i class="fas fa-heart"></i>', action: 'view_saved' },
                { text: 'Set Preferences', icon: '<i class="fas fa-cog"></i>', action: 'set_preferences' }
            ]);
        }

        async function searchHotels(location, checkIn = null, checkOut = null) {
            showTyping();

            try {
                let hotels = [];

                if (accessToken) {
                    // Use Amadeus API if available
                    let url = `https://test.api.amadeus.com/v2/shopping/hotel-offers?cityCode=${location}`;

                    if (checkIn && checkOut) {
                        url += `&checkInDate=${checkIn}&checkOutDate=${checkOut}`;
                    }

                    const response = await fetch(url, {
                        headers: {
                            'Authorization': `Bearer ${accessToken}`
                        }
                    });

                    const data = await response.json();

                    if (data.data && data.data.length > 0) {
                        hotels = data.data.map(hotel => ({
                            name: hotel.hotel.name,
                            location: `${hotel.hotel.address.cityName}, ${hotel.hotel.address.countryCode}`,
                            price: hotel.offers[0].price.total,
                            currency: hotel.offers[0].price.currency,
                            rating: (Math.random() * 2 + 3).toFixed(1),
                            amenities: hotel.hotel.amenities || ["Free WiFi", "24h Reception"]
                        }));
                    }
                }

                // Fallback to sample data if API fails or returns no results
                if (hotels.length === 0) {
                    // Combine all hotel categories
                    hotels = [
                        ...sampleHotelData.popular_destinations,
                        ...sampleHotelData.budget_options,
                        ...sampleHotelData.beach_resorts,
                        ...sampleHotelData.hill_stations,
                        ...sampleHotelData.heritage_properties
                    ];

                    // Filter by location if possible
                    if (location) {
                        hotels = hotels.filter(h =>
                            h.location.toLowerCase().includes(location.toLowerCase())
                        );
                    }
                }

                // Rest of the function remains the same...
                hideTyping();

                if (hotels.length === 0) {
                    createMessage(`üîç No hotels found in ${location}. Try another destination.`, false, [
                        { text: 'Try Another Search', icon: '<i class="fas fa-search"></i>', action: 'search_hotels' },
                        { text: 'Main Menu', icon: '<i class="fas fa-home"></i>', action: 'main' }
                    ]);
                    return;
                }

                // Display hotel results
                const hotelsList = hotels.slice(0, 5).map(hotel => `
            <div class="hotel-card">
                <h3>${hotel.name}</h3>
                <p>üìç ${hotel.location}</p>
                <p class="price">${hotel.currency} ${hotel.price}</p>
                <p class="rating">‚≠ê ${hotel.rating}/5.0</p>
                <p>${hotel.amenities.map(a => `<span class="amenity">${a}</span>`).join(' ')}</p>
            </div>
        `).join('');

                createMessage(`üè® Hotels in ${location}:<br>${hotelsList}`, false, [
                    { text: 'View More', icon: '<i class="fas fa-arrow-down"></i>', action: 'view_more', data: { location, hotels } },
                    { text: 'Search Again', icon: '<i class="fas fa-search"></i>', action: 'search_hotels' },
                    { text: 'Main Menu', icon: '<i class="fas fa-home"></i>', action: 'main' }
                ]);

            } catch (error) {
                console.error("Error searching hotels:", error);
                hideTyping();
                createMessage(`‚ö†Ô∏è Sorry, we encountered an error. Here are some sample hotels:`, false);
                displaySampleHotels();
            }
        }

        function displaySampleHotels() {
            const hotels = sampleHotelData.popular_destinations.slice(0, 3);
            const hotelsList = hotels.map(hotel => `
                <div class="hotel-card">
                    <h3>${hotel.name}</h3>
                    <p>üìç ${hotel.location}</p>
                    <p class="price">${hotel.currency} ${hotel.price}</p>
                    <p class="rating">‚≠ê ${hotel.rating}/5.0</p>
                    <p>${hotel.amenities.map(a => `<span class="amenity">${a}</span>`).join(' ')}</p>
                </div>
            `).join('');

            createMessage(hotelsList, false, [
                { text: 'Search Hotels', icon: '<i class="fas fa-search"></i>', action: 'search_hotels' },
                { text: 'Main Menu', icon: '<i class="fas fa-home"></i>', action: 'main' }
            ]);
        }

        function handleOptionClick(action, data = null) {
            showTyping();

            setTimeout(async () => {
                hideTyping();

                switch (action) {
                    case 'main':
                        displayMainMenu();
                        break;

                    case 'search_hotels':
                        createMessage(`üåç Enter a city to search for hotels (e.g., "Paris" or "New York"):`, false, [
                            { text: 'Back', icon: '<i class="fas fa-arrow-left"></i>', action: 'main' }
                        ]);
                        break;

                    case 'popular_destinations':
                        searchHotels('LON'); // London
                        break;

                    case 'budget_options':
                        searchHotels('PAR'); // Paris
                        break;

                    case 'luxury_hotels':
                        searchHotels('DXB'); // Dubai
                        break;
                    case 'beach_resorts':
                        searchHotels('Goa'); // Default beach destination
                        break;

                    case 'hill_stations':
                        searchHotels('Shimla'); // Default hill station
                        break;

                    case 'heritage_properties':
                        searchHotels('Jaipur'); // Default heritage city
                        break;

                    case 'view_saved':
                        if (savedHotels.length === 0) {
                            createMessage(`‚ù§ You haven't saved any hotels yet!`, false, [
                                { text: 'Browse Hotels', icon: '<i class="fas fa-hotel"></i>', action: 'main' }
                            ]);
                        } else {
                            const savedList = savedHotels.map(h =>
                                `<div class="hotel-card">
                                    <h3>${h.name}</h3>
                                    <p>üìç ${h.location}</p>
                                    <p class="price">${h.currency} ${h.price}</p>
                                </div>`
                            ).join('');

                            createMessage(`‚ù§ Your saved hotels:<br>${savedList}`, false, [
                                { text: 'Browse More', icon: '<i class="fas fa-hotel"></i>', action: 'main' }
                            ]);
                        }
                        break;

                    case 'set_preferences':
                        createMessage(`‚öôÔ∏è Set your travel preferences:`, false, [
                            { text: 'Set Budget', icon: '<i class="fas fa-wallet"></i>', action: 'set_budget' },
                            { text: 'Set Dates', icon: '<i class="fas fa-calendar"></i>', action: 'set_dates' },
                            { text: 'Main Menu', icon: '<i class="fas fa-home"></i>', action: 'main' }
                        ]);
                        break;

                    case 'set_budget':
                        createMessage(`üí∞ What's your budget per night?`, false, [
                            { text: 'Economy (< $100)', action: 'save_budget', data: 'economy' },
                            { text: 'Mid-range ($100-$300)', action: 'save_budget', data: 'midrange' },
                            { text: 'Luxury (> $300)', action: 'save_budget', data: 'luxury' },
                            { text: 'Back', icon: '<i class="fas fa-arrow-left"></i>', action: 'set_preferences' }
                        ]);
                        break;

                    case 'save_budget':
                        userPreferences.budget = data;
                        createMessage(`‚úÖ Budget preference saved as ${data}.`, false, [
                            { text: 'Continue Setup', icon: '<i class="fas fa-cog"></i>', action: 'set_preferences' },
                            { text: 'Main Menu', icon: '<i class="fas fa-home"></i>', action: 'main' }
                        ]);
                        break;

                    case 'set_dates':
                        createMessage(`üìÖ When are you traveling? Enter dates (e.g., "June 15-20, 2023" or "15/06/2023-20/06/2023"):`, false, [
                            { text: 'Back', icon: '<i class="fas fa-arrow-left"></i>', action: 'set_preferences' }
                        ]);
                        break;

                    case 'view_more':
                        if (data && data.hotels) {
                            const moreHotels = data.hotels.slice(5, 10).map(hotel => `
                                <div class="hotel-card">
                                    <h3>${hotel.name}</h3>
                                    <p>üìç ${hotel.location}</p>
                                    <p class="price">${hotel.currency} ${hotel.price}</p>
                                    <p class="rating">‚≠ê ${hotel.rating}/5.0</p>
                                </div>
                            `).join('');

                            createMessage(`üè® More hotels in ${data.location}:<br>${moreHotels}`, false, [
                                { text: 'Search Again', icon: '<i class="fas fa-search"></i>', action: 'search_hotels' },
                                { text: 'Main Menu', icon: '<i class="fas fa-home"></i>', action: 'main' }
                            ]);
                        }
                        break;


                    default:
                        if (action.startsWith('save_')) {
                            const hotelName = action.replace('save_', '').replace(/_/g, ' ');
                            const hotel = [...sampleHotelData.popular_destinations, ...sampleHotelData.budget_options]
                                .find(h => h.name.toLowerCase() === hotelName.toLowerCase());

                            if (hotel && !savedHotels.some(h => h.name === hotel.name)) {
                                savedHotels.push(hotel);
                                document.querySelector('.saved-hotels').innerHTML = `<i class="fas fa-heart"></i> Saved Hotels (${savedHotels.length})`;
                                createMessage(`‚ù§ Saved ${hotel.name} to your favorites!`, false, [
                                    { text: 'View Saved', icon: '<i class="fas fa-heart"></i>', action: 'view_saved' },
                                    { text: 'Main Menu', icon: '<i class="fas fa-home"></i>', action: 'main' }
                                ]);
                            }
                        }
                        break;
                }
            }, 1000);
        }

        async function sendMessage() {
            const question = userInput.value.trim();
            if (!question) return;

            createMessage(question, true);
            userInput.value = '';
            showTyping();

            setTimeout(async () => {
                hideTyping();

                // Check for location queries
                if (question.toLowerCase().includes('hotel') || question.toLowerCase().includes('stay')) {
                    const locationMatch = question.match(/(?:in|at|near)\s+([a-zA-Z\s]+)/i);
                    const dateMatch = question.match(/(\d{1,2}[\/-]\d{1,2}[\/-]\d{2,4})|([a-zA-Z]+\s+\d{1,2})/gi);

                    if (locationMatch) {
                        const location = locationMatch[1].trim();
                        let checkIn = null, checkOut = null;

                        if (dateMatch && dateMatch.length >= 2) {
                            checkIn = formatDate(dateMatch[0]);
                            checkOut = formatDate(dateMatch[1]);
                        }

                        searchHotels(location, checkIn, checkOut);
                    } else {
                        createMessage(`üîç Please specify a location for your hotel search (e.g., "Hotels in Paris" or "Find stays in Tokyo").`, false, [
                            { text: 'Popular Destinations', icon: '<i class="fas fa-map-marker-alt"></i>', action: 'popular_destinations' },
                            { text: 'Main Menu', icon: '<i class="fas fa-home"></i>', action: 'main' }
                        ]);
                    }
                } else if (question.toLowerCase().includes('price') || question.toLowerCase().includes('cost')) {
                    const hotelMatch = question.match(/(?:price|cost)\s+(?:of|for)\s+([a-zA-Z\s]+)/i);

                    if (hotelMatch) {
                        const hotelName = hotelMatch[1].trim();
                        const hotel = [...sampleHotelData.popular_destinations, ...sampleHotelData.budget_options]
                            .find(h => h.name.toLowerCase().includes(hotelName.toLowerCase()));

                        if (hotel) {
                            createMessage(`üè® <strong>${hotel.name}</strong> in ${hotel.location}<br>üí∞ ${hotel.currency} ${hotel.price} per night<br>‚≠ê Rating: ${hotel.rating}/5.0`, false, [
                                { text: 'Save Hotel', icon: '<i class="fas fa-heart"></i>', action: `save_${hotel.name.replace(/\s/g, '_')}` },
                                { text: 'Book Now', icon: '<i class="fas fa-calendar-check"></i>', action: `book_${hotel.name.replace(/\s/g, '_')}` },
                                { text: 'Main Menu', icon: '<i class="fas fa-home"></i>', action: 'main' }
                            ]);
                        } else {
                            createMessage(`üîç I couldn't find pricing for "${hotelName}". Try searching for hotels in a specific location.`, false, [
                                { text: 'Search Hotels', icon: '<i class="fas fa-search"></i>', action: 'search_hotels' },
                                { text: 'Main Menu', icon: '<i class="fas fa-home"></i>', action: 'main' }
                            ]);
                        }
                    }
                } else {
                    createMessage(`ü§ñ I'm your AI Hotel Booking Assistant. You can ask me about:<br>- Hotels in a specific city<br- Hotel prices<br>- Popular destinations`, false, [
                        { text: 'Search Hotels', icon: '<i class="fas fa-search"></i>', action: 'search_hotels' },
                        { text: 'Main Menu', icon: '<i class="fas fa-home"></i>', action: 'main' }
                    ]);
                }
            }, 1500);
        }

        function formatDate(dateStr) {
            // Simple date formatting - in a real app you'd use a proper date library
            if (dateStr.includes('/')) {
                const parts = dateStr.split('/');
                return `${parts[2]}-${parts[1]}-${parts[0]}`; // YYYY-MM-DD
            }
            return dateStr;
        }

        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        // Initialize the app
        init();
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');

        // Check for saved theme preference or use system preference
        const currentTheme = localStorage.getItem('theme') ||
            (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');

        // Apply the current theme
        if (currentTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
        } else {
            document.documentElement.removeAttribute('data-theme');
            themeToggle.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
        }

        // Toggle between dark and light mode
        themeToggle.addEventListener('click', () => {
            if (document.documentElement.getAttribute('data-theme') === 'dark') {
                document.documentElement.removeAttribute('data-theme');
                localStorage.setItem('theme', 'light');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
            }
        });

        function displayMainMenu() {
            currentCategory = null;
            currentOffset = 0;
            createMessage(`üè® Welcome to your AI Hotel Booking Assistant! How can I help you find your perfect stay?`, false, [
                { text: 'Search Hotels', icon: '<i class="fas fa-search"></i>', action: 'search_hotels' },
                { text: 'Popular Destinations', icon: '<i class="fas fa-map-marker-alt"></i>', action: 'popular_destinations' },
                { text: 'Budget Options', icon: '<i class="fas fa-wallet"></i>', action: 'budget_options' },
                { text: 'Luxury Hotels', icon: '<i class="fas fa-crown"></i>', action: 'luxury_hotels' },
                { text: 'Beach Resorts', icon: '<i class="fas fa-umbrella-beach"></i>', action: 'beach_resorts' },
                { text: 'Hill Stations', icon: '<i class="fas fa-mountain"></i>', action: 'hill_stations' },
                { text: 'Heritage Stays', icon: '<i class="fas fa-landmark"></i>', action: 'heritage_properties' },
                { text: 'View Saved Hotels', icon: '<i class="fas fa-heart"></i>', action: 'view_saved' },
                { text: 'Set Preferences', icon: '<i class="fas fa-cog"></i>', action: 'set_preferences' }
            ]);
        }

        // Call the init function to start the app
        init();


    </script>

</body>

</html>
